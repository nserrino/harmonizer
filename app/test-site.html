<!DOCTYPE html>
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <!-- polyfill -->
    <script src="node_modules/midi/inc/shim/Base64.js" type="text/javascript"></script>
    <script src="node_modules/midi/inc/shim/Base64binary.js" type="text/javascript"></script>
    <script src="node_modules/midi/inc/shim/WebAudioAPI.js" type="text/javascript"></script>
    <!-- midi.js package -->
    <script src="node_modules/midi/js/midi/audioDetect.js" type="text/javascript"></script>
    <script src="node_modules/midi/js/midi/gm.js" type="text/javascript"></script>
    <script src="node_modules/midi/js/midi/loader.js" type="text/javascript"></script>
    <script src="node_modules/midi/js/midi/plugin.audiotag.js" type="text/javascript"></script>
    <script src="node_modules/midi/js/midi/plugin.webaudio.js" type="text/javascript"></script>
    <script src="node_modules/midi/js/midi/plugin.webmidi.js" type="text/javascript"></script>
    <!-- utils -->
    <script src="node_modules/midi/js/util/dom_request_xhr.js" type="text/javascript"></script>
    <script src="node_modules/midi/js/util/dom_request_script.js" type="text/javascript"></script>
</head>
<body>
<script type="text/javascript">
window.onload = function () {
    MIDI.loadPlugin({
        soundfontUrl: "node_modules/midi/examples/soundfont/",
        instrument: "acoustic_grand_piano",
        onprogress: function(state, progress) {
            console.log(state, progress);
        },
        onsuccess: function() {
            var delay = 0; // play one note every quarter second
            var note = 50; // the MIDI note
            var velocity = 127; // how hard the note hits
            // play the note
            MIDI.setVolume(0, 127);
            MIDI.noteOn(0, note, velocity, delay);
            MIDI.noteOff(0, note, delay + 0.75);
        }
    });
};
</script>
</body>
</html>
